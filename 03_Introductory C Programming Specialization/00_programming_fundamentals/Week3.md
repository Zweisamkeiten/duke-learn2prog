---
date created: 2022-09-30 15:33
date updated: 2022-09-30 17:09
---

# Types

一切对计算机来说都是一个数字，但类型决定了数字的大小和解释。

## Everything is number

十进制转二进制

![](Pasted%20image%2020220930153303.png)

![](Pasted%20image%2020220930153453.png)

以二进制表示的数字可以很容易地转换为十六进制，只需将它们分组为 4 位数的簇，每个簇都可以用一个十六进制数字表示。

## 基础数据类型

![](Pasted%20image%2020220930153915.png)
![](Pasted%20image%2020220930153941.png)

- `char` 是最小的数据类型 8位
- `int` 32位
- unsigned 从 0 到 4,294,967,295 0-2^(32)-1
- -2,147,483,648 到 2,147,483,647 -(2^31) - (2^31) - 1
- `short` `long`

![](Pasted%20image%2020220930154358.png)

- 浮点数和双精度浮点数 表达实数
- 由于实数的数量是无限的，因此计算机无法将它们全部表达出来（这将需要无限数量的位！）
- 对于无法准确表示的值，将存储该值的近似值。
- 表示实数的一种方法是定点
  - 取 32 位，并将它们解释为中间有二进制点。 最高有效 16 位将是“整数”部分，最低 16 位将是“小数”部分。
  - 不能表示非常大的数字，也不能精确地表示非常小的数字
- 浮点数有 32 位用于表示浮点数。 这 32 位分为三个字段。 最低 23 位编码尾数； 接下来的 8 位编码指数。 最高有效位是符号位 s，它对我们的公式进行了如下扩充：(-1)^{s}\times m\times 2^{e}。 （当 s = 1 时，数字为负数。当 s = 0 时，数字为正数。） double 有 64 位，并通过将尾数扩展到 52 位和指数到 11 位来使用它们。

![](Pasted%20image%2020220930154837.png)

**在为变量选择类型以及对假定值已知的变量执行测试时，了解精度非常重要**
对于您开始（或加入）的每个项目，绝对值得花一点时间考虑代码以及在该特定领域中精度的重要性。

![](Pasted%20image%2020220930155241.png)

## 表达式有类型

- 类型由其子表达式的类型决定
- 隐式提升
- 函数的类型是其声明的返回类型

### 类型转换

- 操作数的类型不同 首先需要将两个操作数转换为相同类型。
- 类型提升
- 符号扩展:

![](Pasted%20image%2020220930163309.png)

- 零扩展

零扩展是与符号扩展类似的概念。在移动操作或转换操作中，零扩展指的是将目标的高位数设置为零，而不是将高位数设置成原数字的最高有效位。

- 将较长的整数类型转换为较短的整数类型时。 在这里，位模式被截断以适应——最高有效位被丢弃，只保留最低有效位。
  - 例如 int 转换为 char 只保留最后8位
- 从有 **符号整数** 转换为 **无符号整数** 会使位模式保持不变。 但是，如果该值最初是负数，现在将被解释为一个很大的正数。
- 尽量不要进行强制转换(在代码中添加强制转换以消除错误表明您实际上并没有修复代码，而是用它。)

### Casting 显式类型转换

- 将两个整数相除，而整数除法总是产生整数结果
- 在除法发生之前将两个操作数转换为实数类型
- 但其不改变原始值的大小

### 上溢和下溢

- 溢出是否是程序正确性的问题是特定于上下文的。
- 类型选择决定了每个变量的上限和下限，有责任了解每个选择溢出的可能性和影响。

## "Non-numbers" 非数字

将此规则扩展到看起来不像数字的事物——文字、颜色、图片、歌曲、电影。计算机只能对数字进行操作，必须意识到所有这些东西也必须是数字.

找到一种对这些“非数字”数据类型进行编码的方法，只需提出一种将信息编码为位的新约定，并将这些位解释为原始信息。

### Strings 字符串

- 字符串是一串字符且以一个特殊字符结尾。
- `\0`  空终止父

### Images

- 最常见的是 RGB 编码
- 对单一颜色进行数字编码，图像就会被编码为二维颜色网格。 该网格中的每个“点”称为一个像素。

### Sound and Video

- 声音自然是一种波形，可以很容易地表示为一个数字序列。
- 数字表示就是以周期性的间隔记录声波的“高度”，形成一个数字序列。
- 间隔的频率称为采样率（更高的采样率会带来更好的声音质量）

## 复杂 自定义数据类型

### Struct 结构

![](Pasted%20image%2020220930170905.png)
声明定义结构使用的四种方法
![](Pasted%20image%2020220930170956.png)
- `_t` 结尾是一种约定
- 良好编程的一个关键部分是使用良好的抽象。 结构是另一种抽象形式。
- 不要只是将数据组合成没有逻辑目的的结构

### Typedef
如上使用1语法
如果一个函数将一个矩形作为其输入并返回一个较小的矩形作为其输出，函数定义将为 **struct rect_t shrinkRect(struct rect_t shrinkThisRectangle)**
有些混乱，因此可以使用 `typedef`

![](Pasted%20image%2020220930171816.png)
`typedef` 也可用于 一个数据类型的抽象，使得其名字更有意义。

### Enumerated Types 枚举类型
- 枚举类型是命名常量，可以增加代码的可读性和正确性。
```c
enum threat_level_t {
	LOW,  // 0
	GUARDED, // 1
	ELEVATED, // 2
	HIGH, // 3
	SEVERE // 4
};
```
- 每个名称都有一个常数 默认从0开始
- 常量名称约定全部大写

![](Pasted%20image%2020220930172921.png)
![](Pasted%20image%2020220930172941.png)
![](Pasted%20image%2020220930172950.png)
